<?xml version="1.0" encoding="UTF-8"?>
<itop_design xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.7" load="strict">
   <portals>
      <portal id="backoffice" _delta="must_exist">
         <deny>
            <profile id="IP Portal user" _delta="define"/>
         </deny>
      </portal>
      <portal id="teemip-portal" _delta="define">
         <rank>1.0</rank>
         <url>pages/exec.php?exec_module=itop-portal-base&amp;exec_page=index.php&amp;portal_id=teemip-portal</url>
         <handler/>
         <allow>
            <profile id="IP Portal user"/>
            <profile id="Administrator"/>
            <profile id="Hostmaster"/>
         </allow>
      </portal>
   </portals>
   <module_designs>
      <module_design id="teemip-portal" xsi:type="portal" _delta="define">
         <properties>
            <name>portal:teemip-portal</name>
            <logo>teemip-portal/asset/img/Logo_TeemIP_horizontal_Blanc.svg</logo>
            <themes>
               <theme id="portal">itop-portal-new-look-for-3.2-lts/public/css/portal.scss</theme>
               <theme id="bootstrap">itop-portal-new-look-for-3.2-lts/public/css/bootstrap-theme-combodo.scss</theme>
               <theme id="main">itop-portal-new-look-for-3.2-lts/public/css/main.scss</theme>
            </themes>
            <templates>
                <template id="layout">itop-portal-new-look-for-3.2-lts/templates/layout.html.twig</template>
                <template id="home">itop-portal-new-look-for-3.2-lts/templates/home/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\AbstractController:page">itop-portal-new-look-for-3.2-lts/templates/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\AbstractController:navigation_menu">itop-portal-new-look-for-3.2-lts/templates/pages/navigation_menu.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\AbstractController:modal">itop-portal-new-look-for-3.2-lts/templates/modal/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\AbstractController:loader">itop-portal-new-look-for-3.2-lts/templates/helpers/loader.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\AbstractController:tagset_clic_handler_js">itop-portal-new-look-for-3.2-lts/templates/helpers/tagset_clic_handler.js.twig</template>
                <template id="Combodo\iTop\Portal\Controller\AbstractController:session_message">itop-portal-new-look-for-3.2-lts/templates/helpers/session_messages/session_message.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\AbstractController:session_messages">itop-portal-new-look-for-3.2-lts/templates/helpers/session_messages/session_messages.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\PortalBrick:tile">itop-portal-new-look-for-3.2-lts/templates/bricks/tile.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:page">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:tile">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/tile-default.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:tile_badge">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/tile-badge.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:tile_chart">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/tile-chart.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:tile_top_list">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/tile-top-list.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:page_chart">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/layout-chart.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:page_table">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/layout-table.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:mode_chart_bar">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/mode-bar-chart.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:mode_chart_pie">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/mode-pie-chart.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\ManageBrick:popup-export-excel">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/popup-export-excel.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\AggregatePageBrick:page">itop-portal-new-look-for-3.2-lts/templates/bricks/aggregate-page/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\AbstractBrick:page">itop-portal-new-look-for-3.2-lts/templates/bricks/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\BrowseBrick:tile">itop-portal-new-look-for-3.2-lts/templates/bricks/tile.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\BrowseBrick:page">itop-portal-new-look-for-3.2-lts/templates/bricks/browse/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\BrowseBrick:page_list">itop-portal-new-look-for-3.2-lts/templates/bricks/browse/mode_list.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\BrowseBrick:page_mosaic">itop-portal-new-look-for-3.2-lts/templates/bricks/browse/mode_mosaic.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\BrowseBrick:page_tree">itop-portal-new-look-for-3.2-lts/templates/bricks/browse/mode_tree.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\FilterBrick:tile">itop-portal-new-look-for-3.2-lts/templates/bricks/filter/tile.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\UserProfileBrick:page">itop-portal-new-look-for-3.2-lts/templates/bricks/user-profile/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\UserProfileBrick:user_info">itop-portal-new-look-for-3.2-lts/templates/bricks/user-profile/user_info.html.twig</template>
                <template id="Combodo\iTop\Portal\Brick\UserProfileBrick:user_info_ready_js">itop-portal-new-look-for-3.2-lts/templates/bricks/user-profile/user_info.ready.js.twig</template>
                <template id="Combodo\iTop\Portal\Controller\DefaultController:page">itop-portal-new-look-for-3.2-lts/templates/home/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ManageBrickController:modal_export_excel">itop-portal-new-look-for-3.2-lts/templates/bricks/manage/popup-export-excel.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:page">itop-portal-new-look-for-3.2-lts/templates/bricks/object/layout.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:modal">itop-portal-new-look-for-3.2-lts/templates/bricks/object/modal.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:mode_create">itop-portal-new-look-for-3.2-lts/templates/bricks/object/mode_create.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:mode_edit">itop-portal-new-look-for-3.2-lts/templates/bricks/object/mode_edit.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:mode_search_hierarchy">itop-portal-new-look-for-3.2-lts/templates/bricks/object/mode_search_hierarchy.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:mode_search_regular">itop-portal-new-look-for-3.2-lts/templates/bricks/object/mode_search_regular.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:mode_view">itop-portal-new-look-for-3.2-lts/templates/bricks/object/mode_view.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:mode_apply_stimulus">itop-portal-new-look-for-3.2-lts/templates/bricks/object/mode_apply_stimulus.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:mode_loader">itop-portal-new-look-for-3.2-lts/templates/modal/mode_loader.html.twig</template>
                <template id="Combodo\iTop\Portal\Controller\ObjectController:plugins_buttons">itop-portal-new-look-for-3.2-lts/templates/bricks/object/plugins_buttons.html.twig</template>
            </templates>
	        <triggers_query><![CDATA[SELECT TriggerOnPortalUpdate AS t WHERE t.target_class IN (:parent_classes)]]></triggers_query>
            <attachments>
               <allow_delete>true</allow_delete>
            </attachments>
            <urlmaker_class>TeemIpPortalEditURLMaker</urlmaker_class>
         </properties>
         <bricks>
            <brick id="user-profile" xsi:type="Combodo\iTop\Portal\Brick\UserProfileBrick">
               <rank>
                  <default>1</default>
               </rank>
               <title>
                  <default>Brick:Portal:UserProfile:Navigation:Dropdown:MyProfil</default>
               </title>
               <decoration_class>
                  <default>fas fa-user fa-2x</default>
               </decoration_class>
               <form>
	               <fields/>
	               <twig>
   	                 <div class="form_field" data-field-id="first_name" data-field-flags="read_only"/>
                     <div class="form_field" data-field-id="name" data-field-flags="read_only"/>
                     <div class="form_field" data-field-id="org_id" data-field-flags="read_only"/>
                     <div class="form_field" data-field-id="email" data-field-flags="read_only"/>
                     <div class="form_field" data-field-id="phone"/>
                     <div class="form_field" data-field-id="location_id"/>
                     <div class="form_field" data-field-id="function"/>
                     <div class="form_field" data-field-id="manager_id" data-field-flags="read_only"/>
                  </twig>
               </form>
            </brick>
            <brick id="quick-new-iprequest-extended" xsi:type="Combodo\iTop\Portal\Brick\CreateBrick">
               <active>true</active>
               <rank>
                  <default>10</default>
               </rank>
               <width>6</width>
               <modal>true</modal>
               <title>
                  <default>Brick:Portal:QuickNewTicket:Title</default>
               </title>
               <description>Brick:Portal:QuickNewTicket:Title+</description>
               <visible>
                  <home>false</home>
               </visible>
               <decoration_class>
                  <default>fas fa-bolt fa-2x fa-fw</default>
               </decoration_class>
               <class>IPRequest</class>
               <rules>
                  <rule id="contact-to-iprequest"/>
               </rules>
            </brick>
            <brick id="ongoing-tickets-for-portal-user" xsi:type="Combodo\iTop\Portal\Brick\ManageBrick">
               <active>true</active>
               <rank>
                  <default>20</default>
               </rank>
               <width>6</width>
               <title>
                  <default>Brick:Portal:OngoingRequests:Title</default>
               </title>
               <description>Brick:Portal:OngoingRequests:Title+</description>
               <decoration_class>
                  <default>fc fc-ongoing-request fc-2x</default>
               </decoration_class>
               <oql><![CDATA[SELECT IPRequest]]></oql>
	            <fields>
                  <field id="title"/>
                  <field id="start_date"/>
                  <field id="status"/>
               </fields>
	            <grouping>
		            <tabs>
                        <show_tab_counts>true</show_tab_counts>
                        <groups>
				            <group id="recent">
                           <rank>1</rank>
                           <title>Brick:Portal:OngoingRequests:Tab:Recent</title>
                           <condition><![CDATA[SELECT IPRequest WHERE (status != 'closed') AND (start_date > DATE(DATE_SUB(NOW(), INTERVAL 7 DAY))) ]]></condition>
                        </group>
                        <group id="opened">
                           <rank>2</rank>
                           <title>Brick:Portal:OngoingRequests:Tab:OnGoing</title>
                           <condition><![CDATA[SELECT IPRequest WHERE status NOT IN ('closed', 'resolved')]]></condition>
                        </group>
                        <group id="resolved">
                           <rank>3</rank>
                           <title>Brick:Portal:OngoingRequests:Tab:Resolved</title>
                           <condition><![CDATA[SELECT IPRequest WHERE status = 'resolved']]></condition>
                        </group>
                     </groups>
                  </tabs>
               </grouping>
               <data_loading>full</data_loading>
            </brick>
            <brick id="closed-tickets-for-portal-user" xsi:type="Combodo\iTop\Portal\Brick\ManageBrick">
               <active>true</active>
               <rank>
                  <navigation_menu>50</navigation_menu>
               </rank>
               <visible>
                  <home>false</home>
               </visible>
               <width>12</width>
               <title>
                  <default>Brick:Portal:ClosedRequests:Title</default>
               </title>
               <description/>
               <decoration_class>
                  <default>fc fc-closed-request fc-2x</default>
               </decoration_class>
               <oql><![CDATA[SELECT IPRequest WHERE org_id = :current_contact->org_id AND caller_id = :current_contact_id AND status = 'closed']]></oql>
	            <fields>
                  <field id="title"/>
                  <field id="start_date"/>
                  <field id="status"/>
               </fields>
               <grouping>
	               <tabs>
                      <show_tab_counts>true</show_tab_counts>
                      <groups>
 			               <group id="recent">
                           <rank>1</rank>
                           <title>Brick:Portal:ClosedRequests:Tab:Recent</title>
                           <condition><![CDATA[SELECT IPRequest WHERE (status = 'closed') AND (start_date > DATE(DATE_SUB(NOW(), INTERVAL 7 DAY))) ]]></condition>
                        </group>
                        <group id="closed">
                           <rank>2</rank>
                           <title>Brick:Portal:ClosedRequests:Tab:Closed</title>
                           <condition><![CDATA[SELECT IPRequest WHERE status = 'closed']]></condition>
                        </group>
                     </groups>
                  </tabs>
               </grouping>
               <data_loading>auto</data_loading>
            </brick>
         </bricks>
         <forms>
            <form id="iprequestaddresscreatev4-create">
               <class>IPRequestAddressCreateV4</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_ip"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id" data-field-flags="mandatory"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="subnet_id" data-field-flags="mandatory"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="range_id"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="short_name"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="domain_id"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="usage_id"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ciclass"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="connectableci_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ci_ip_attribute"/>
                     </div>
                  </div>
               </twig>
               <modes>
                  <mode id="create"/>
               </modes>
            </form>
            <form id="iprequestaddresscreatev4-edit">
               <class>IPRequestAddressCreateV4</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ip_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_ip" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="usage_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="subnet_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="range_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="short_name" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="domain_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ciclass" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="connectableci_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ci_ip_attribute" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
                  <!-- mode id can among create / edit / view -->
	               <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
            <form id="iprequestaddresscreatev6-create">
               <class>IPRequestAddressCreateV6</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_ip"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id" data-field-flags="mandatory"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="subnet_id" data-field-flags="mandatory"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="range_id"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="short_name"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="domain_id"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="usage_id"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ciclass"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="connectableci_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ci_ip_attribute"/>
                     </div>
                  </div>
               </twig>
               <modes>
                  <!-- mode id can among create / edit / view -->
	               <mode id="create"/>
               </modes>
            </form>
            <form id="iprequestaddresscreatev6-edit">
               <class>IPRequestAddressCreateV6</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ip_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_ip" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="usage_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="subnet_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="range_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="short_name" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="domain_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ciclass" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="connectableci_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ci_ip_attribute" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
	               <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
            <form id="iprequestaddressupdate-create">
               <class>IPRequestAddressUpdate</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="ip_id" data-field-flags="mandatory"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_status_ip"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_short_name"/>
                     </div>
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_domain_id"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_usage_id"/>
                     </div>
                  </div>
               </twig>
               <modes>
	               <mode id="create"/>
               </modes>
            </form>
            <form id="iprequestaddressupdate-edit">
               <class>IPRequestAddressUpdate</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="ip_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_status_ip" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_short_name" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_domain_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_usage_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
	               <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
            <form id="iprequestaddressdelete-create">
               <class>IPRequestAddressDelete</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="ip_id" data-field-flags="mandatory"/>
                 </div>
               </twig>
               <modes>
	               <mode id="create"/>
               </modes>
            </form>
            <form id="iprequestaddressdelete-edit">
               <class>IPRequestAddressDelete</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="ip_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>S
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
	               <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
            <form id="iprequestsubnetcreatev4-create">
               <class>IPRequestSubnetCreateV4</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_subnet"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id" data-field-flags="mandatory"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="mask" data-field-flags="mandatory"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="name"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="type"/>
                     </div>
                  </div>
               </twig>
               <modes>
	               <mode id="create"/>
               </modes>
            </form>
            <form id="iprequestsubnetcreatev4-edit">
               <class>IPRequestSubnetCreateV4</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_subnet" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="subnet_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="mask" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="name" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="type" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
	               <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
            <form id="iprequestsubnetcreatev6-create">
               <class>IPRequestSubnetCreateV6</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_subnet"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id" data-field-flags="mandatory"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="mask" data-field-flags="mandatory"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="name"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="type"/>
                     </div>
                  </div>
               </twig>
               <modes>
                  <mode id="create"/>
               </modes>
            </form>
            <form id="iprequestsubnetcreatev6-edit">
               <class>IPRequestSubnetCreateV6</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status_subnet" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="subnet_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="block_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="mask" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="location_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="name" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="type" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
                  <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
            <form id="iprequestsubnetupdate-create">
               <class>IPRequestSubnetUpdate</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="subnet_id" data-field-flags="mandatory"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_status_subnet"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="old_location_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="new_location_id"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="new_name"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_type"/>
                     </div>
                  </div>
               </twig>
               <modes>
                  <mode id="create"/>
               </modes>
             </form>
            <form id="iprequestsubnetupdate-edit">
               <class>IPRequestSubnetUpdate</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="subnet_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_status_subnet" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="old_location_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="new_location_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="new_name" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-6">
                        <div class="form_field" data-field-id="new_type" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
                  <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
            <form id="iprequestsubnetdelete-create">
               <class>IPRequestSubnetDelete</class>
               <properties>
                  <navigation_rules>
                     <submit>
                        <default>go-to-open-request-on-submit</default>
                     </submit>
                  </navigation_rules>
               </properties>
               <fields/>
               <twig>
                  <div>
                     <div class="form_field" data-field-id="title" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="description" data-field-flags="mandatory"/>
                     <div class="form_field" data-field-id="subnet_id" data-field-flags="mandatory"/>
                 </div>
               </twig>
               <modes>
                  <mode id="create"/>
               </modes>
            </form>
            <form id="iprequestsubnetdelete-edit">
               <class>IPRequestSubnetDelete</class>
               <fields/>
               <twig>
                  <div class="row">
                     <div class="col-sm-8">
                        <div class="form_field" data-field-id="title" data-field-flags="read_only"/>
                     </div>
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="status" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-12">
                        <div class="form_field" data-field-id="description" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-sm-4">
                        <div class="form_field" data-field-id="subnet_id_friendlyname" data-field-flags="read_only"/>
                     </div>
                  </div>
                  <div>
                     <div class="form_field" data-field-id="public_log"/>
                  </div>
               </twig>
               <modes>
                  <mode id="edit"/>
                  <mode id="view"/>
               </modes>
            </form>
         </forms>
         <classes>
            <class id="FunctionalCI">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT FunctionalCI WHERE org_id = :current_contact->org_id]]></oql_view>
               </scope>
            </scopes>
         </class>
         <class id="Contact">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT Contact WHERE org_id = :current_contact->org_id]]></oql_view>
               </scope>
               <scope id="all">
                  <oql_view><![CDATA[SELECT Contact]]></oql_view>
                  <allowed_profiles>
                     <allowed_profile id="Administrator"/>
                  </allowed_profiles>
               </scope>
            </scopes>
            <lists>
               <list id="default">
                  <items>
                     <item id="status">
                        <rank>10</rank>
                     </item>
                     <item id="org_id">
                        <rank>20</rank>
                     </item>
                     <item id="function">
                        <rank>50</rank>
                     </item>
                  </items>
               </list>
            </lists>
         </class>
         <class id="DNSObject">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT DNSObject WHERE org_id = :current_contact->org_id]]></oql_view>
                  <oql_edit><![CDATA[SELECT DNSObject]]></oql_edit>
               </scope>
               <scope id="portal-power-user">
                  <oql_view><![CDATA[SELECT DNSObject WHERE org_id = :current_contact->org_id]]></oql_view>
                  <oql_edit><![CDATA[SELECT DNSObject]]></oql_edit>
                  <allowed_profiles>
                     <allowed_profile id="Portal power user"/>
                  </allowed_profiles>
               </scope>
            </scopes>
         </class>
         <class id="IPObject">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT IPObject WHERE org_id = :current_contact->org_id]]></oql_view>
                  <oql_edit><![CDATA[SELECT IPObject]]></oql_edit>
               </scope>
            </scopes>
         </class>
         <class id="IPRequest">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT IPRequest WHERE caller_id = :current_contact_id]]></oql_view>
                  <oql_edit><![CDATA[SELECT IPRequest]]></oql_edit>
               </scope>
            </scopes>
         </class>
         <class id="IPUsage">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT IPUsage WHERE org_id = :current_contact->org_id]]></oql_view>
                  <oql_edit><![CDATA[SELECT IPUsage]]></oql_edit>
               </scope>
            </scopes>
         </class>
         <class id="Location">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT Location WHERE org_id = :current_contact->org_id]]></oql_view>
               </scope>
            </scopes>
         </class>
         <class id="Organization">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT Organization WHERE id = :current_contact->org_id]]></oql_view>
               </scope>
            </scopes>
         </class>
         <class id="User">
            <scopes>
               <scope id="all">
                  <oql_view><![CDATA[SELECT User AS U JOIN Person AS P ON U.contactid=P.id WHERE P.id = :current_contact_id]]></oql_view>
               </scope>
            </scopes>
         </class>
         </classes>
         <action_rules>
            <action_rule id="contact-to-iprequest">
               <source_oql><![CDATA[SELECT Contact AS C WHERE C.id = :current_contact_id]]></source_oql>
               <presets>
                  <preset id="1">set(caller_id, $current_contact_id$)</preset>
                  <preset id="2">copy(org_id, org_id)</preset>
               </presets>
               <retrofits/>
            </action_rule>
         </action_rules>
         <navigation_rules>
            <navigation_rule id="go-to-open-request-on-submit" xsi:type="go-to-manage-brick">
               <id>ongoing-tickets-for-portal-user</id>
            </navigation_rule>
         </navigation_rules>
      </module_design>
   </module_designs>
   <module_parameters>
      <parameters id="teemip-portal" _delta="define">
         <lazy_loading_threshold>500</lazy_loading_threshold><!-- Will be placed in the conf/<env>/config-itop.php file under the itop-portal module's settings  -->
      </parameters>
      <parameters id="itop-portal-new-look-for-3.2-lts" _delta="must_exist">
         <menu_display_style type="hash">
            <teemip-portal _delta="define">horizontal</teemip-portal>
         </menu_display_style>
      </parameters>
   </module_parameters>
   <snippets>
      <snippet id="TeemIpPortalEditUrlMaker" _delta="define">
         <placement>module</placement>
         <rank>3</rank>
         <module>teemip-portal</module>
         <content><![CDATA[
use Combodo\iTop\Portal\UrlMaker\AbstractPortalUrlMaker;

require_once APPROOT.'/lib/autoload.php';

/**
* Hyperlinks to the "edition" of the object (vs view)
*/
class TeemIpPortalEditURLMaker extends AbstractPortalUrlMaker
{
    const PORTAL_ID = 'teemip-portal';
}

/**
 * Hyperlinks to the "view" of the object (vs edition)
 */
class TeemIpPortalViewUrlMaker extends TeemIpPortalEditUrlMaker
{
    /**
     * @inheritDoc
     */
    public static function MakeObjectURL($sClass, $iId)
    {
        return static::PrepareObjectURL($sClass, $iId, 'view');

    }
}

// Default portal hyperlink (for notifications) is the edit hyperlink
DBObject::RegisterURLMakerClass(TeemIpPortalEditUrlMaker::PORTAL_ID, 'TeemIpPortalEditUrlMaker');
// Additional entries for hyperlinks in notifications:
// - Explicit link to object in edit mode
DBObject::RegisterURLMakerClass(TeemIpPortalEditUrlMaker::PORTAL_ID . '-edit', 'TeemIpPortalEditUrlMaker');
// - Explicit link to object in view mode
DBObject::RegisterURLMakerClass(TeemIpPortalEditUrlMaker::PORTAL_ID . '-view', 'TeemIpPortalViewUrlMaker');

]]></content>
      </snippet>
   </snippets>
</itop_design>